/*!
 * Column visibility buttons for Buttons and DataTables.
 * Â© SpryMedia Ltd - datatables.net/license
 */
import jQuery from"jquery";import DataTable from"datatables.net";import Buttons from"datatables.net-buttons";let $=jQuery;$.extend(DataTable.ext.buttons,{colvis:function(t,n){var i=null,o={extend:"collection",init:function(t,n){i=n},text:function(t){return t.i18n("buttons.colvis","Column visibility")},className:"buttons-colvis",closeButton:!1,buttons:[{extend:"columnsToggle",columns:n.columns,columnText:n.columnText}]};return t.on("column-reorder.dt"+n.namespace,function(){t.button(null,t.button(null,i).node()).collectionRebuild([{extend:"columnsToggle",columns:n.columns,columnText:n.columnText}])}),o},columnsToggle:function(t,n){return t.columns(n.columns).indexes().map(function(t){return{extend:"columnToggle",columns:t,columnText:n.columnText}}).toArray()},columnToggle:function(t,n){return{extend:"columnVisibility",columns:n.columns,columnText:n.columnText}},columnsVisibility:function(t,n){return t.columns(n.columns).indexes().map(function(t){return{extend:"columnVisibility",columns:t,visibility:n.visibility,columnText:n.columnText}}).toArray()},columnVisibility:{columns:void 0,text:function(t,n,i){return i._columnText(t,i)},className:"buttons-columnVisibility",action:function(t,n,i,o){var n=n.columns(o.columns),e=n.visible();n.visible(void 0!==o.visibility?o.visibility:!(e.length&&e[0]))},init:function(i,t,o){var e=this;t.attr("data-cv-idx",o.columns),i.on("column-visibility.dt"+o.namespace,function(t,n){n.bDestroying||n.nTable!=i.settings()[0].nTable||e.active(i.column(o.columns).visible())}).on("column-reorder.dt"+o.namespace,function(){o.destroying||1===i.columns(o.columns).count()&&(e.text(o._columnText(i,o)),e.active(i.column(o.columns).visible()))}),this.active(i.column(o.columns).visible())},destroy:function(t,n,i){t.off("column-visibility.dt"+i.namespace).off("column-reorder.dt"+i.namespace)},_columnText:function(t,n){var i;return"string"==typeof n.text?n.text:(i=(i=t.column(n.columns).title()).replace(/\n/g," ").replace(/<br\s*\/?>/gi," ").replace(/<select(.*?)<\/select\s*>/gi,""),i=DataTable.Buttons.stripHtmlComments(str),i=DataTable.stripHtml(i).trim(),n.columnText?n.columnText(t,idx,i):i)}},colvisRestore:{className:"buttons-colvisRestore",text:function(t){return t.i18n("buttons.colvisRestore","Restore visibility")},init:function(t,n,i){t.columns().every(function(){var t=this.init();void 0===t.__visOriginal&&(t.__visOriginal=this.visible())})},action:function(t,n,i,o){n.columns().every(function(t){var n=this.init();this.visible(n.__visOriginal)})}},colvisGroup:{className:"buttons-colvisGroup",action:function(t,n,i,o){n.columns(o.show).visible(!0,!1),n.columns(o.hide).visible(!1,!1),n.columns.adjust()},show:[],hide:[]}});export default DataTable;
/*!
 * Column visibility buttons for Buttons and DataTables.
 * Â© SpryMedia Ltd - datatables.net/license
 */
!function(e){var i,o;"function"==typeof define&&define.amd?define(["jquery","datatables.net","datatables.net-buttons"],function(n){return e(n,window,document)}):"object"==typeof exports?(i=require("jquery"),o=function(n,t){t.fn.dataTable||require("datatables.net")(n,t),t.fn.dataTable.Buttons||require("datatables.net-buttons")(n,t)},"undefined"==typeof window?module.exports=function(n,t){return n=n||window,t=t||i(n),o(n,t),e(t,0,n.document)}:(o(window,i),module.exports=e(i,window,window.document))):e(jQuery,window,document)}(function(n,t,e){"use strict";var o=n.fn.dataTable;return n.extend(o.ext.buttons,{colvis:function(n,t){var e=null,i={extend:"collection",init:function(n,t){e=t},text:function(n){return n.i18n("buttons.colvis","Column visibility")},className:"buttons-colvis",closeButton:!1,buttons:[{extend:"columnsToggle",columns:t.columns,columnText:t.columnText}]};return n.on("column-reorder.dt"+t.namespace,function(){n.button(null,n.button(null,e).node()).collectionRebuild([{extend:"columnsToggle",columns:t.columns,columnText:t.columnText}])}),i},columnsToggle:function(n,t){return n.columns(t.columns).indexes().map(function(n){return{extend:"columnToggle",columns:n,columnText:t.columnText}}).toArray()},columnToggle:function(n,t){return{extend:"columnVisibility",columns:t.columns,columnText:t.columnText}},columnsVisibility:function(n,t){return n.columns(t.columns).indexes().map(function(n){return{extend:"columnVisibility",columns:n,visibility:t.visibility,columnText:t.columnText}}).toArray()},columnVisibility:{columns:void 0,text:function(n,t,e){return e._columnText(n,e)},className:"buttons-columnVisibility",action:function(n,t,e,i){var t=t.columns(i.columns),o=t.visible();t.visible(void 0!==i.visibility?i.visibility:!(o.length&&o[0]))},init:function(e,n,i){var o=this;n.attr("data-cv-idx",i.columns),e.on("column-visibility.dt"+i.namespace,function(n,t){t.bDestroying||t.nTable!=e.settings()[0].nTable||o.active(e.column(i.columns).visible())}).on("column-reorder.dt"+i.namespace,function(){i.destroying||1===e.columns(i.columns).count()&&(o.text(i._columnText(e,i)),o.active(e.column(i.columns).visible()))}),this.active(e.column(i.columns).visible())},destroy:function(n,t,e){n.off("column-visibility.dt"+e.namespace).off("column-reorder.dt"+e.namespace)},_columnText:function(n,t){var e,i;return"string"==typeof t.text?t.text:(e=n.column(t.columns).index(),i=(i=(i=n.settings()[0].aoColumns[e].sTitle)||n.column(e).header().innerHTML).replace(/\n/g," ").replace(/<br\s*\/?>/gi," ").replace(/<select(.*?)<\/select\s*>/g,"").replace(/<!\-\-.*?\-\-!?>/g,""),i=o.stripHtml(i).trim(),t.columnText?t.columnText(n,e,i):i)}},colvisRestore:{className:"buttons-colvisRestore",text:function(n){return n.i18n("buttons.colvisRestore","Restore visibility")},init:function(n,t,e){n.columns().every(function(){var n=this.init();void 0===n.__visOriginal&&(n.__visOriginal=this.visible())})},action:function(n,t,e,i){t.columns().every(function(n){var t=this.init();this.visible(t.__visOriginal)})}},colvisGroup:{className:"buttons-colvisGroup",action:function(n,t,e,i){t.columns(i.show).visible(!0,!1),t.columns(i.hide).visible(!1,!1),t.columns.adjust()},show:[],hide:[]}}),o});